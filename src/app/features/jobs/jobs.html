<div class="max-w-7xl mx-auto px-4 py-8">
    <div class="bg-[#1a1a1a] p-4 rounded-2xl border border-white/10 mb-12 shadow-2xl">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="relative">
                <span class="material-icons absolute left-3 top-3.5 text-orange-500">search</span>
                <input
                    [(ngModel)]="params().keywords"
                    placeholder="Category (e.g. Design)"
                    class="w-full bg-black/40 border-white/10 rounded-xl py-3 pl-10 text-white focus:border-orange-500 ring-0 transition-all outline-none"
                />
            </div>
            <div class="relative">
                <span class="material-icons absolute left-3 top-3.5 text-orange-500">place</span>
                <input
                    [(ngModel)]="params().location"
                    placeholder="Location"
                    class="w-full bg-black/40 border-white/10 rounded-xl py-3 pl-10 text-white focus:border-orange-500 ring-0 transition-all outline-none"
                />
            </div>
            <button
                (click)="onSearch()"
                class="bg-orange-500 hover:bg-orange-600 text-black font-black py-3 rounded-xl transition-all active:scale-95 flex items-center justify-center gap-2"
            >
                @if (isLoading()) {
                    <div
                        class="animate-spin h-5 w-5 border-2 border-black border-t-transparent rounded-full"
                    ></div>
                }
                Search Jobs
            </button>
        </div>
    </div>

    @if (searchResult()) {
        <p class="text-neutral-400 mb-6 font-medium tracking-wide">
            FOUND
            <span class="text-orange-500 font-bold">{{ searchResult()?.totalResults }}</span>
            OPPORTUNITIES
        </p>
    }

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        @for (item of searchResult()?.jobs; track item.id) {
            <app-job-card [job]="item"> </app-job-card>
        } @empty {
            <div class="col-span-full text-center py-20">
                <span class="material-icons text-6xl text-neutral-800 mb-4">search_off</span>
                <p class="text-neutral-500 italic">No jobs match your criteria.</p>
            </div>
        }
    </div>

    @if (searchResult() && searchResult()!.totalPages > 1) {
        <div class="mt-16 flex justify-center items-center gap-6">
            <button
                [disabled]="params().page === 0"
                (click)="changePage(params().page - 1)"
                class="p-2 rounded-full border border-white/10 text-white disabled:opacity-20 hover:bg-orange-500 hover:text-black transition-all"
            >
                <span class="material-icons">west</span>
            </button>
            <span class="text-neutral-400 font-bold uppercase tracking-widest text-sm">
                Page {{ params().page }} of {{ searchResult()?.totalPages }}
            </span>
            <button
                [disabled]="params().page >= searchResult()!.totalPages"
                (click)="changePage(params().page + 1)"
                class="p-2 rounded-full border border-white/10 text-white disabled:opacity-20 hover:bg-orange-500 hover:text-black transition-all"
            >
                <span class="material-icons">east</span>
            </button>
        </div>
    }
</div>
